import { Module, Provider } from '@nestjs/common';

import { bullMqTokenList } from '../custom-providers';
import {
  ActiveJobsMetricQueueServiceHealthIndicator,
  CompletedJobsMetricQueueServiceHealthIndicator,
  InboundParseQueueServiceHealthIndicator,
  StandardQueueServiceHealthIndicator,
  WebSocketsQueueServiceHealthIndicator,
  WorkflowQueueServiceHealthIndicator,
} from '../health';
import {
  AnalyticsService,
  BullMqService,
  CacheService,
  CalculateDelayService,
  DistributedLockService,
  EventsDistributedLockService,
  InMemoryProviderService,
  InvalidateCacheService,
  OldInstanceBullMqService,
  ReadinessService,
} from '../services';
import {
  ActiveJobsMetricQueueService,
  CompletedJobsMetricQueueService,
  InboundParseQueue,
  StandardQueueService,
  WebSocketsQueueService,
  WorkflowQueueService,
} from '../services/queues';
import {
  ActiveJobsMetricWorkerService,
  CompletedJobsMetricWorkerService,
  InboundParseWorker,
  StandardWorkerService,
  WebSocketsWorkerService,
  WorkflowWorkerService,
  OldInstanceWorkflowWorkerService,
} from '../services/workers';
import {
  AddDelayJob,
  AddDigestJob,
  AddJob,
  BulkCreateExecutionDetails,
  CreateExecutionDetails,
  CreateNotificationJobs,
  CreateSubscriber,
  CreateTenant,
  DigestFilterSteps,
  DigestFilterStepsBackoff,
  DigestFilterStepsRegular,
  DigestFilterStepsTimed,
  GetTenant,
  ProcessSubscriber,
  ProcessTenant,
  StoreSubscriberJobs,
  SubscriberJobBoundUsecase,
  UpdateSubscriber,
  UpdateTenant,
} from '../usecases';
import {
  JobRepository,
  ExecutionDetailsRepository,
  NotificationRepository,
  SubscriberRepository,
  IntegrationRepository,
  NotificationTemplateRepository,
  TenantRepository,
} from '@novu/dal';
import { SubscriberProcessQueueService } from '../services/queues/subscriber-process-queue.service';
import { SubscriberProcessWorkerService } from '../services/workers/subscriber-process-worker.service';

const PROVIDERS: Provider[] = [
  ActiveJobsMetricQueueService,
  ActiveJobsMetricQueueServiceHealthIndicator,
  ActiveJobsMetricWorkerService,
  bullMqTokenList,
  BullMqService,
  CompletedJobsMetricQueueService,
  CompletedJobsMetricQueueServiceHealthIndicator,
  CompletedJobsMetricWorkerService,
  InboundParseQueue,
  InboundParseWorker,
  InboundParseQueueServiceHealthIndicator,
  ReadinessService,
  StandardQueueService,
  StandardQueueServiceHealthIndicator,
  StandardWorkerService,
  WebSocketsQueueService,
  WebSocketsQueueServiceHealthIndicator,
  WebSocketsWorkerService,
  WorkflowQueueService,
  WorkflowQueueServiceHealthIndicator,
  WorkflowWorkerService,
  OldInstanceWorkflowWorkerService,
  OldInstanceBullMqService,
  CreateTenant,
  GetTenant,
  TenantRepository,
  UpdateTenant,
  ProcessTenant,
  NotificationTemplateRepository,
  IntegrationRepository,
  UpdateSubscriber,
  SubscriberRepository,
  CacheService,
  InvalidateCacheService,
  CreateSubscriber,
  ProcessSubscriber,
  DigestFilterStepsTimed,
  DigestFilterStepsRegular,
  NotificationRepository,
  DigestFilterStepsBackoff,
  DigestFilterSteps,
  CreateNotificationJobs,
  BulkCreateExecutionDetails,
  AddDelayJob,
  CalculateDelayService,
  InMemoryProviderService,
  DistributedLockService,
  EventsDistributedLockService,
  AddDigestJob,
  ExecutionDetailsRepository,
  CreateExecutionDetails,
  JobRepository,
  AddJob,
  StoreSubscriberJobs,
  AnalyticsService,
  SubscriberJobBoundUsecase,
  SubscriberProcessQueueService,
  SubscriberProcessWorkerService,
];

@Module({
  providers: [...PROVIDERS],
  exports: [...PROVIDERS],
})
export class QueuesModule {}
